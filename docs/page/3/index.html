<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="机器学习, 深度学习, 人工智能" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="一些技术笔记">
<meta property="og:type" content="website">
<meta property="og:title" content="灵魂机器">
<meta property="og:url" content="http://cn.soulmachine.me/page/3/index.html">
<meta property="og:site_name" content="灵魂机器">
<meta property="og:description" content="一些技术笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="灵魂机器">
<meta name="twitter:description" content="一些技术笔记">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> 灵魂机器 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?259b539fcd8cab18ad0a6deb98ac2046";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">灵魂机器</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">终有一天机器也有灵魂</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014-01-31-install-uek-for-centos/" itemprop="url">
                  给CentOS安装UEK内核
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-01-31T22:05:00Z" content="2014-01-31">
              2014-01-31
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/DevOps/" itemprop="url" rel="index">
                    <span itemprop="name">DevOps</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014-01-31-install-uek-for-centos/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014-01-31-install-uek-for-centos/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>最近给CentOS 6.5 安装了docker，不过每次运行都会报警：</p>
<blockquote>
<p>WARNING: You are running linux kernel version 2.6.32-431.3.1.el6.x86_64, which might be unstable running docker. Please upgrade your kernel to 3.8.0.</p>
</blockquote>
<p>给CentOS 升级内核，有三种途径，一种是yum官方源里有更新的版本，一种途径是自己编译，另一种途径是使用别人编译好了的内核。</p>
<p>CentOS yum源是出了名的更新慢，目前没有 3.8版内核，第二种途径很麻烦，工作量很大，因此本文用第三种。例如UEK，Oracle提供了一个公共的yum源，<a href="http://public-yum.oracle.com/">http://public-yum.oracle.com/</a></p>
<p>##添加yum源</p>
<p>UEK的稳定版还是 2.6 内核的，beta版的内核是3.8的，所以我们使用beta源</p>
<pre><code>sudo wget http://public-yum.oracle.com/beta/public-yum-ol6-beta.repo -P /etc/yum.repos.d
</code></pre><p>由于UEK3还没有加入到正式版本中，还目前属于测试阶段，，需要手工将 <code>enabled=0</code>改为 <code>enabled=1</code></p>
<pre><code>sudo vim /etc/yum.repos.d/public-yum-ol6-beta.repo
</code></pre><p>##添加GPG key</p>
<pre><code>sudo wget http://public-yum.oracle.com/RPM-GPG-KEY-oracle-ol6 -O /etc/pki/rpm-gpg/RPM-GPG-KEY-oracle
gpg --quiet --with-fingerprint /etc/pki/rpm-gpg/RPM-GPG-KEY-oracle
</code></pre><p>##更新yum源</p>
<pre><code>sudo yum update
</code></pre><p>##列出所有的kernel</p>
<pre><code>yum list kernel*
</code></pre>
          <div class="post-more-link text-center">
            <a class="btn" href="/2014-01-31-install-uek-for-centos/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014-01-30-spark-development-environment/" itemprop="url">
                  Spark开发环境的配置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-01-30T16:36:00Z" content="2014-01-30">
              2014-01-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Spark/" itemprop="url" rel="index">
                    <span itemprop="name">Spark</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014-01-30-spark-development-environment/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014-01-30-spark-development-environment/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><strong>软件版本</strong>：Spark 0.9</p>
<p>配置Spark开发环境，其实分为三个层次，一种是针对运维人员，把Spark安装部署到集群；一种是针对普通开发者，引入Spark的jar包，调用Spark提供的接口，编写分布式程序，写好后编译成jar，就可以提交到Spark集群去运行了；第三种是针对Spark开发者，为了给Spark贡献代码，需要git clone Spark的代码，然后导入IDE，为Spark开发代码。</p>
<p>##1 部署Spark集群<br>这种是运维人员在生产环境下，搭建起一个Spark集群。</p>
<p>###（可选）创建新用户 Spark<br>一般我倾向于把需要启动daemon进程，对外提供服务的程序，即服务器类的程序，安装在单独的用户下面。这样可以做到隔离，运维方面，安全性也提高了。</p>
<p>创建一个新的group,</p>
<pre><code>$ sudo groupadd spark
</code></pre><p>创建一个新的用户，并加入group,</p>
<pre><code>$ sudo useradd -g spark spark
</code></pre><p>给新用户设置密码，</p>
<pre><code>$ sudo passwd spark
</code></pre><p>在每台机器上创建 spark 新用户，并配置好SSH无密码，参考我的另一篇博客，<a href="http://www.yanjiuyanjiu.com/blog/20120102/">SSH无密码登录的配置</a></p>
<p>假设有三台机器，hostname分别是 master, worker01, worker02。</p>
<p>###1.1 下载 Spark 预编译好的二进制包<br>如果你需要用到HDFS，则要针对Hadoop 1.x 和Hadoop 2.x 选择不同的版本。这里我选择 Hadoop 2.x 版。</p>
<pre><code>spark@master $ wget http://d3kbcqa49mib13.cloudfront.net/spark-0.9.0-incubating-bin-hadoop1.tgz
spark@master $ tar zxf spark-0.9.0-incubating-bin-hadoop1.tgz -C ~/local/opt
</code></pre><p>###1.2 将tgz压缩包scp到所有机器，解压到相同的路径</p>
<pre><code>spark@master $ scp spark-0.9.0-incubating-bin-hadoop1.tgz spark@worker01:~
spark@master $ ssh worker01
spark@worker01 $ tar zxf spark-0.9.0-incubating-bin-hadoop1.tgz -C ~/local/opt
spark@worker01 $ exit
spark@master $ scp spark-0.9.0-incubating-bin-hadoop1.tgz spark@worker02:~
spark@master $ ssh worker02
spark@worker02 $ tar zxf spark-0.9.0-incubating-bin-hadoop1.tgz -C ~/local/opt
spark@worker02 $ exit
</code></pre><p>###1.3 修改配置文件<br>Spark 0.9 以后，配置文件简单多了，只有一个必须要配置，就是 <code>conf/slaves</code> 这个文件。在这个文件里添加slave的hostname。</p>
<p>###1.4 拷贝配置文件到所有slave</p>
<pre><code>spark@master $ spark@master $ scp ./conf/slaves spark@worker01:~/local/opt/spark-0.9.0-incubating-bin-hadoop1/conf
spark@master $ spark@master $ scp ./conf/slaves spark@worker02:~/local/opt/spark-0.9.0-incubating-bin-hadoop1/conf
</code></pre><p>###1.5 启动Spark集群</p>
<pre><code>spark@master $ ./sbin/start-all.sh
</code></pre>
          <div class="post-more-link text-center">
            <a class="btn" href="/2014-01-30-spark-development-environment/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014-01-29-my-ansible-playbook/" itemprop="url">
                  我的Ansible playbook
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-01-29T22:08:00Z" content="2014-01-29">
              2014-01-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/DevOps/" itemprop="url" rel="index">
                    <span itemprop="name">DevOps</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014-01-29-my-ansible-playbook/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014-01-29-my-ansible-playbook/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>前提</strong>，安装好Ansible，参考我的上一篇博客，<a href="http://www.yanjiuyanjiu.com/blog/20140127" target="_blank" rel="external">Ansible 快速入门</a></p>
<pre><code>---
- hosts: all
  sudo: True
  remote_user: work
  vars:
    ant_version: 1.9.3
    maven_version: 3.1.1
    scala_version: 2.10.3
    sbt_version: 0.12.4

  tasks:
  ########## for CentOS and RedHat ##########
    - name: Install the libselinux-python package  # because ansible needs it
      yum: name=libselinux-python state=installed
      when: ansible_distribution == &apos;CentOS&apos; or ansible_distribution == &apos;Red Hat Enterprise Linux&apos;

    - name: Disable SELinux in conf file
      selinux: state=disabled
      when: ansible_distribution == &apos;CentOS&apos; or ansible_distribution == &apos;Red Hat Enterprise Linux&apos;

    - name: update YUM repositories
      shell: &apos;yum -y update&apos;
      when: ansible_distribution == &apos;CentOS&apos; or ansible_distribution == &apos;Red Hat Enterprise Linux&apos;

    - name: Install OpenJDK
      yum: name=java-1.7.0-openjdk-devel state=present
      when: ansible_distribution == &apos;CentOS&apos; or ansible_distribution == &apos;Red Hat Enterprise Linux&apos;

    - name: Set JAVA_HOME environment variable
      lineinfile: dest=&apos;/etc/profile&apos; regexp=&apos;^#?\s*export JAVA_HOME=(.*)$&apos; line=&apos;export JAVA_HOME=/usr/lib/jvm/java&apos; state=present
      when: ansible_distribution == &apos;CentOS&apos; or ansible_distribution == &apos;Red Hat Enterprise Linux&apos;

    - name: install the &apos;Development tools&apos; package group
      yum: name=&quot;@Development tools&quot; state=present
      when: ansible_distribution == &apos;CentOS&apos; or ansible_distribution == &apos;Red Hat Enterprise Linux&apos;

    - name: upgrade all packages
      shell: &apos;yum -y upgrade&apos;
      when: ansible_distribution == &apos;CentOS&apos; or ansible_distribution == &apos;Red Hat Enterprise Linux&apos;


  ########## for Ubuntu and Debian ##########
    - name: Run &quot;apt-get update&quot; to update the source list
      apt: update_cache=yes
      when: ansible_distribution == &apos;Debian&apos; or ansible_distribution == &apos;Ubuntu&apos;

    - name: Install OpenJDK
      apt: pkg=openjdk-7-jdk state=present
      when: ansible_distribution == &apos;Debian&apos; or ansible_distribution == &apos;Ubuntu&apos;

    - name: Set JAVA_HOME environment variable
      lineinfile: dest=&apos;/etc/profile&apos; regexp=&apos;^#?\s*export JAVA_HOME=(.*)$&apos; line=&apos;export JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-amd64&apos; state=present
      when: ansible_distribution == &apos;Debian&apos; or ansible_distribution == &apos;Ubuntu&apos;

    - name: Install build-essential
      apt: pkg=build-essential state=present
      when: ansible_distribution == &apos;Debian&apos; or ansible_distribution == &apos;Ubuntu&apos;

    - name: Update all packages to the latest version
      apt: upgrade=dist
      when: ansible_distribution == &apos;Debian&apos; or ansible_distribution == &apos;Ubuntu&apos;


  ########## Common opreations for all OS ##########
    # Create local directories
    - file: path=~/local/bin state=directory
      sudo: no
    - file: path=~/local/sbin state=directory
      sudo: no
    - file: path=~/local/src state=directory
      sudo: no
    - file: path=~/local/opt state=directory
      sudo: no
    - file: path=~/local/var state=directory
      sudo: no
    - lineinfile: dest=~/.bashrc regexp=&apos;^#?\s*export PATH=(.*)/local/bin(.*)$&apos; line=&quot;export PATH=$PATH:$HOME/local/bin&quot; state=present
      sudo: no
    - lineinfile: dest=~/.bashrc regexp=&apos;^#?\s*export PATH=(.*)/local/sbin(.*)$&apos; line=&quot;export PATH=$PATH:$HOME/local/sbin&quot; state=present
      sudo: no

    - name: Set CLASSPATH and PATH environment variables
      lineinfile: $item
      with_items:
        - dest=&apos;/etc/profile&apos; regexp=&apos;^#?\s*export CLASSPATH=(.*)$&apos; line=&apos;export CLASSPATH=.:$JAVA_HOME/lib/*.jar:$JAVA_HOME/jre/lib/*.jar&apos; state=present
        - dest=&apos;/etc/profile&apos; regexp=&apos;^#?\s*export PATH=(.*)JAVA_HOME(.*)$&apos; line=&quot;export PATH=$PATH:$JAVA_HOME/bin&quot; state=present

    ###### Since Ant in yum and apt is too old, download the .tar.bz2 file and install it
    # Install Apache Ant
    - name: Download Apache Ant
      get_url: url=http://mirror.cc.columbia.edu/pub/software/apache//ant/binaries/apache-ant-{{ant_version}}-bin.tar.bz2 dest=/tmp/apache-ant-{{ant_version}}-bin.tar.bz2
    - name: Untar Ant
      shell: chdir=/tmp creates=/opt/apache-ant-{{ant_version}} tar -jxf apache-ant-{{ant_version}}-bin.tar.bz2 -C /opt
    - lineinfile: dest=/etc/profile regexp=&apos;^#?\s*export ANT_HOME=(.*)$&apos; line=&apos;export ANT_HOME=/opt/apache-ant-{{ant_version}}&apos; state=present
    - lineinfile: dest=/etc/profile regexp=&apos;^#?\s*export PATH=(.*)ANT_HOME(.*)$&apos; line=&quot;export PATH=$PATH:$ANT_HOME/bin&quot; state=present

    # Install Apache Maven, since there is no Maven package in yum and apt repo
    - name: Download Apache Maven
      get_url: url=http://apache.claz.org/maven/maven-3/3.1.1/binaries/apache-maven-{{maven_version}}-bin.tar.gz dest=/tmp/apache-maven-{{maven_version}}-bin.tar.gz
    - name: Untar Maven
      shell: chdir=/tmp creates=/opt/apache-maven-{{maven_version}} tar -zxf apache-maven-{{maven_version}}-bin.tar.gz -C /opt
    - lineinfile: dest=/etc/profile regexp=&apos;^#?\s*export MAVEN_HOME=(.*)$&apos; line=&apos;export MAVEN_HOME=/opt/apache-maven-{{maven_version}}&apos; state=present
    - lineinfile: dest=/etc/profile regexp=&apos;^#?\s*export PATH=(.*)MAVEN_HOME(.*)$&apos; line=&quot;export PATH=$PATH:$MAVEN_HOME/bin&quot; state=present

    # Install the scala compiler, because the scala compiler in yum and apt repo is too old
    - name: Download Scala
      get_url: url=http://www.scala-lang.org/files/archive/scala-{{scala_version}}.tgz dest=/tmp/scala-{{scala_version}}.tgz
    - name: Untar Scala
      shell: chdir=/tmp creates=/opt/scala-{{scala_version}} tar -zxf scala-{{scala_version}}.tgz -C /opt
    - lineinfile: dest=/etc/profile regexp=&apos;^#?\s*export SCALA_HOME=(.*)$&apos; line=&apos;export SCALA_HOME=/opt/scala-{{scala_version}}&apos; state=present
    - lineinfile: dest=/etc/profile regexp=&apos;^#?\s*export PATH=(.*)SCALA_HOME(.*)$&apos; line=&quot;export PATH=$PATH:$SCALA_HOME/bin&quot; state=present

    # Install sbt
    - name: Download sbt
      get_url: url=http://repo.scala-sbt.org/scalasbt/sbt-native-packages/org/scala-sbt/sbt//{{sbt_version}}/sbt.tgz dest=/tmp/sbt-{{sbt_version}}.tgz
    - name: Untar sbt
      shell: chdir=/tmp creates=/opt/sbt-{{sbt_version}} tar -zxf sbt-{{sbt_version}}.tgz -C /opt
    - name: Rename sbt directory
      shell: chdir=/opt creates=/opt/sbt-{{sbt_version}} mv sbt/ sbt-{{sbt_version}}/
    - lineinfile: dest=/etc/profile regexp=&apos;^#?\s*export SBT_HOME=(.*)$&apos; line=&apos;export SBT_HOME=/opt/sbt-{{sbt_version}}&apos; state=present
    - lineinfile: dest=/etc/profile regexp=&apos;^#?\s*export PATH=(.*)SBT_HOME(.*)$&apos; line=&quot;export PATH=$PATH:$SBT_HOME/bin&quot; state=present

    # Install Go
    - name: Download Go
      get_url: url=https://go.googlecode.com/files/go1.2.linux-amd64.tar.gz dest=/tmp/go1.2.linux-amd64.tar.gz
    - name: Untar Go
      shell: chdir=/tmp creates=/opt/go tar -zxf go1.2.linux-amd64.tar.gz -C /opt
    - lineinfile: dest=/etc/profile regexp=&apos;^#?\s*export GOROOT=(.*)$&apos; line=&apos;export GOROOT=/opt/go&apos; state=present
    - lineinfile: dest=/etc/profile regexp=&apos;^#?\s*export PATH=(.*)GOROOT(.*)$&apos; line=&quot;export PATH=$PATH:$GOROOT/bin&quot; state=present
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014-01-28-restore-octopress-at-a-new-computer/" itemprop="url">
                  Restore Octopress at a new computer
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-01-28T00:04:00Z" content="2014-01-28">
              2014-01-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Tools/" itemprop="url" rel="index">
                    <span itemprop="name">Tools</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014-01-28-restore-octopress-at-a-new-computer/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014-01-28-restore-octopress-at-a-new-computer/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>OS: Ubuntu 12.04 64-bit</p>
<p>##1. Install ruby</p>
<p>###1.1 Install ruby via RVM</p>
<pre><code>$ \curl -sSL https://get.rvm.io | bash -s stable --ruby
</code></pre><p>###1.2 <a href="https://rvm.io/integration/gnome-terminal">Integrating RVM with gnome-terminal</a><br><code>/etc/profile</code>, <code>~/.bash_profile</code> are for login shell, and <code>~/.bashrc</code> is for interactive shell, and RVM’s path is added to <code>~/.bash_profile</code>, so you need to set the shell as a login shell.</p>
<p>###1.3 Give it a try<br>Exit current shell, and open a new shell,</p>
<pre><code>ruby -v
</code></pre><p>You have successfully installed ruby.</p>
<p>##2. Install Python</p>
<pre><code>$ sudo apt-get install -y python
</code></pre><p>Because <a href="http://pygments.org/">Pygments</a> syntax highlighting needs Python.</p>
<p>##3. Clone your blog to the new machine<br>First you need to clone the <code>source</code> branch to the local octopress folder.</p>
<pre><code>$ git clone -b source git@github.com:username/username.github.com.git octopress
</code></pre>
          <div class="post-more-link text-center">
            <a class="btn" href="/2014-01-28-restore-octopress-at-a-new-computer/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014-01-27-ansible-tutorial/" itemprop="url">
                  Ansible 快速入门
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-01-27T12:10:00Z" content="2014-01-27">
              2014-01-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/DevOps/" itemprop="url" rel="index">
                    <span itemprop="name">DevOps</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014-01-27-ansible-tutorial/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014-01-27-ansible-tutorial/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>Ansible 是一个比Puppet, Chef 更轻量的provisioning 工具，不需要启动daemon进程。这点跟跟pssh差不多，但是比pssh更加强大。</p>
<p>##前提</p>
<ul>
<li>所使用的remote_user要能够SSH无密码登录到所有机器，配置方法见<a href="http://www.yanjiuyanjiu.com/blog/20120102/">SSH无密码登录的配置</a></li>
<li><p>remote_use sudo的时候不需要密码，配置方法如下，</p>
<pre><code>sudo chmod +w /etc/sudoers
sudo vim /etc/sudoers
</code></pre><p>  找到 <code>root    ALL=(ALL:ALL) ALL</code>，在下面添加一行</p>
<pre><code>username    ALL=(ALL:ALL) NOPASSWD:ALL
</code></pre><p>  保存退出，然后恢复为只读，</p>
<pre><code>sudo chmod +w /etc/sudoers 
</code></pre></li>
</ul>
<p>如果忘记了以上两点，运行任何ansible命令的时候，会卡住不动很久。</p>
<p>如果发现在 “GATHERING FACTS”这里卡住，多半是sudo需要密码，试试加上-K选项，例如<code>ansible-playbook -K playbook.yml</code>，参考<a href="https://groups.google.com/forum/#!topic/ansible-project/FL0mxyxOo4M">Running ansible on local Linux desktop hangs on Gathering Facts</a>。</p>
<p><code>-vvvv</code>表示调试模式，加上后会输出很多中间信息，帮助你调试。</p>
<p>##1. 安装Ansible<br>只需要在一台机器上安装，其他机器不需要安装任何东西，这就是ansible比puppet, chef方便的地方。</p>
<pre><code>sudo yum install ansible
</code></pre><p>或者</p>
<pre><code>sudo apt-get install ansible
</code></pre><p>在<code>/etc/ansible/hosts</code>添加想要操作的机器(这个<code>hosts</code>文件也叫做<a href="http://docs.ansible.com/intro_inventory.html">Inventory</a>)，且这些机器都是能<a href="http://www.yanjiuyanjiu.com/blog/20120102">SSH无密码登录的</a>，然后测试一下：</p>
<pre><code>ansible all -a &quot;/bin/echo hello&quot;
</code></pre><p>如果都成功了，说明安装成功。</p>
<p>使用ansible有两种方式：Ad-hoc command 和 playbook。前者用于临时类批量操作，后者用于配置管理，类似与Puppet。</p>
<p>##2. Ad-Hoc Commands<br>Ad-hoc命令的形式一般如下：</p>
<pre><code>ansible groupname -m module -a arguments
</code></pre>
          <div class="post-more-link text-center">
            <a class="btn" href="/2014-01-27-ansible-tutorial/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014-01-26-boot-space-insufficient/" itemprop="url">
                  /boot 目录空间不足
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-01-26T22:07:00Z" content="2014-01-26">
              2014-01-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/DevOps/" itemprop="url" rel="index">
                    <span itemprop="name">DevOps</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014-01-26-boot-space-insufficient/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014-01-26-boot-space-insufficient/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天在服务器上执行 <code>sudo yum -y update</code>的时候报错：</p>
<blockquote>
<p>… needs 18MB on the /boot filesystem</p>
</blockquote>
<h2 id="1-列出所有的内核文件"><a href="#1-列出所有的内核文件" class="headerlink" title="1. 列出所有的内核文件"></a>1. 列出所有的内核文件</h2><pre><code>rpm -q kernel
kernel-2.6.32-431.el6.x86_64
kernel-2.6.32-431.3.1.el6.x86_64
</code></pre><p>发现有多个内核，因此可以删除所有不再使用的内核文件，来释放空间。</p>
<p>##2. 查看当前正在使用的内核</p>
<pre><code>uname -r
2.6.32-431.3.1.el6.x86_64
</code></pre><p>注意，如果你是刚刚 <code>yum -y update</code>过，需要重启一下，内核才会更新，不重启的话<code>uname -r</code>还是显示的旧的。</p>
<p>##3. 删除没有使用的内核</p>
<pre><code>rpm -e 2.6.32-431.el6.x86_64
rpm -e xxx
</code></pre><p>将<code>rpm -q kernel</code>显示的内核复制粘贴到<code>xxx</code>位置。</p>
<h2 id="4-手动删除其他文件"><a href="#4-手动删除其他文件" class="headerlink" title="4. 手动删除其他文件"></a>4. 手动删除其他文件</h2><p>把所有未使用的版本全部删除。</p>
<pre><code>sudo rm -rf /lib/modules/2.6.32-431.el6.x86_64
sudo rm -rf /usr/src/kernels/2.6.32-431.el6.x86_64
sudo rm -rf /usr/src/kernels/2.6.32-431.el6.x86_64.debug
sudo rm /boot/*2.6.32-431*
</code></pre><p>##5. 删除grub里的条目<br>上面的步骤做完了后，最后，把grub里未使用的内核删掉，条目序号是从0开始编号的，删除条目后，记得把<code>default</code>设置为正确的序号。</p>
<p>##6. 再执行 yum update</p>
<pre><code>sudo yum -y update
</code></pre><p>##参考资料<br><a href="http://rajaruan.blog.51cto.com/2771737/868293" target="_blank" rel="external">boot目录空间不足</a></p>
<p><a href="http://www.xiaohuai.com/3301" target="_blank" rel="external">yum update -y，提示/boot 空间不足的解决方法</a></p>
<p><a href="http://forum.ubuntu.org.cn/viewtopic.php?f=97&amp;t=334647" target="_blank" rel="external">如何卸载自己编译的内核？【已解决，方法见6L】</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014-01-25-rdesktop-tutorial/" itemprop="url">
                  Rdesktop 快速入门
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-01-25T22:05:00Z" content="2014-01-25">
              2014-01-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/DevOps/" itemprop="url" rel="index">
                    <span itemprop="name">DevOps</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014-01-25-rdesktop-tutorial/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014-01-25-rdesktop-tutorial/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>rdesktop是一款Linux下兼容Windows Remote Desktop Protocal(RDP)协议的客户端，可以用它连接开启了3389的windows机器。输入<code>rdesktop</code>可以看到该命令的所有选项，其中最常用的选项如下：</p>
<blockquote>
<p>-u: user name<br>-p: password (- to prompt)<br>-f: full-screen mode<br>-g: desktop geometry (WxH)<br>-x: RDP5 experience (m[odem 28.8], b[roadband], l[an] or hex nr.)</p>
</blockquote>
<p>举几个例子，</p>
<pre><code>rdesktop -u feng -p 123456 -xl -f 192.168.1.250
</code></pre><p>这条命令表示，-xl表示客户端和win机器在同一个局域网，因此可以画质调节到最好，-f表示全屏，这条命令最好在局域网下使用。</p>
<pre><code>rdesktop -u feng -p 123456 -xm -f 192.168.1.250
</code></pre><p>跟上一条命令相比，把-xl换成了-xm，画质调节到最差</p>
<pre><code>rdesktop -u feng -p 123456 -xm -g 1024x768 192.168.1.250
</code></pre><p>跟上一条命令相比，将全屏改成了分辨率1024x768</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014-01-24-cluster-time-sync-using-ntp/" itemprop="url">
                  集群时间同步--架设内网NTP服务器
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-01-24T16:40:00Z" content="2014-01-24">
              2014-01-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/DevOps/" itemprop="url" rel="index">
                    <span itemprop="name">DevOps</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014-01-24-cluster-time-sync-using-ntp/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014-01-24-cluster-time-sync-using-ntp/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>环境：CentOS 6.5</p>
<p>对于一个Linux集群，集群内的机器保持时间同步是很重要的，不然会出现很多问题。</p>
<p>本文主要描述如何在集群内架设一台NTP服务器，其他机器都与这台服务器保持时间同步。</p>
<p>##1 安装NTP<br>在所有机器上执行，</p>
<pre><code>$ sudo yum install ntp
</code></pre><p>###2 调整时区<br>把所有机器的时区调整为上海时区，即”+8000”时区。</p>
<p>先看一下机器的时区是否是对的，</p>
<pre><code>$ date -R
</code></pre><p>如果不是”+8000”，则要修改时区，</p>
<pre><code>$ cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
</code></pre><p>###3 （可选）同步BIOS时间<br>Linux系统上面BIOS时间与linux系统时间是分开的，所以调整了时间之后，还需要使用<code>hwclock</code>才能将修改过的时间写入BIOS中。</p>
<p>在<code>/etc/sysconfig/ntpd</code>中添加一行:</p>
<pre><code>SYNC_HWCLOCK=yes
</code></pre><p>##4 配置NTP服务器<br>选择一台能够上网的机器作为NTP服务器，以后这台服务器提供时间同步服务，集群内的其他机器不需要上网去跟公共的NTP服务器同步了。</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2014-01-24-cluster-time-sync-using-ntp/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014-01-23-centos-6-dot-4-upgrade-kernel/" itemprop="url">
                  CentOS 6.5 升级内核到 3.10.28
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-01-23T00:02:00Z" content="2014-01-23">
              2014-01-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/DevOps/" itemprop="url" rel="index">
                    <span itemprop="name">DevOps</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014-01-23-centos-6-dot-4-upgrade-kernel/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014-01-23-centos-6-dot-4-upgrade-kernel/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本文适用于CentOS 6.4, CentOS 6.5，亲测可行，估计也适用于其他Linux发行版。</p>
<h2 id="1-准备工作"><a href="#1-准备工作" class="headerlink" title="1. 准备工作"></a>1. 准备工作</h2><h3 id="1-1-下载源码包"><a href="#1-1-下载源码包" class="headerlink" title="1.1 下载源码包"></a>1.1 下载源码包</h3><p>Linux内核版本有两种：稳定版和开发版 ，Linux内核版本号由3个数字组成：r.x.y</p>
<ul>
<li>r: 主版本号</li>
<li>x: 次版本号，偶数表示稳定版本；奇数表示开发中版本。</li>
<li>y: 修订版本号 ， 表示修改的次数</li>
</ul>
<p>去 <a href="http://www.kernel.org" target="_blank" rel="external">http://www.kernel.org</a> 首页，可以看到有stable, longterm等版本，longterm是比stable更稳定的版本，会长时间更新，因此我选择 3.10.28，</p>
<pre><code>wget  https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.10.28.tar.xz
</code></pre><p>###1.2 解压</p>
<pre><code>tar -xf linux-3.10.28.tar.xz
</code></pre><p>###1.3 更新当前系统</p>
<pre><code>sudo yum update
sudo yum upgrade
</code></pre><p>###1.4 安装编译内核所需要的软件包</p>
<pre><code>sudo yum groupinstall &quot;Development Tools&quot; # 一口气安装编译时所需的一切工具
sudo yum install ncurses-devel #必须这样才能让 make *config 这个指令正确地执行。
sudo yum install qt-devel #如果你没有 X 环境，这一条可以不用
sudo yum install hmaccalc zlib-devel binutils-devel elfutils-libelf-devel #创建 CentOS-6 内核时需要它们
</code></pre><p>##2 配置文件</p>
<p>###2.1 查看当前系统内核</p>
<pre><code>uname -r
2.6.32-358.11.1.el6.x86_64
</code></pre><p>###2.2 将当前系统的配置文件拷贝到当前目录</p>
<pre><code>cp /boot/config-2.6.32-358.11.1.el6.x86_64 .config
</code></pre><p>###2.3 使用旧内核配置，并自动接受每个新增选项的默认设置</p>
<pre><code>sh -c &apos;yes &quot;&quot; | make oldconfig&apos;
</code></pre><p><code>make oldconfig</code>会读取当前目录下的<code>.config</code>文件，在<code>.config</code>文件里没有找到的选项则提示用户填写，然后备份<code>.config</code>文件为<code>.config.old</code>，并生成新的<code>.config</code>文件，参考 <a href="http://stackoverflow.com/questions/4178526/what-does-make-oldconfig-do-exactly-linux-kernel-makefile" target="_blank" rel="external">http://stackoverflow.com/questions/4178526/what-does-make-oldconfig-do-exactly-linux-kernel-makefile</a></p>
<p>##3 编译</p>
<pre><code>sudo make -j8 bzImage #生成内核文件
sudo make -j8 modules #编译模块
sudo make -j8 modules_install #编译安装模块
</code></pre><p>要严格按照这个顺序进行编译，<strong>不能合并成一句</strong>，<code>sudo make -j8 bzImage modules modules_install</code>。</p>
<p><code>-j</code>后面的数字是线程数，用于加快编译速度，一般的经验是，有多少G内存，就填写那个数字，例如有8G内存，则为<code>-j8</code>。</p>
<p>##4 安装</p>
<pre><code>sudo make install
</code></pre><p>如果出现了 <code>ERROR: modinfo: could not find module xxx</code>，数量少的话，可以忽略。</p>
<p>##5 修改Grub引导顺序</p>
<p>安装完成后，需要修改Grub引导顺序，让新安装的内核作为默认内核。</p>
<p>编辑 <code>grub.conf</code>文件，</p>
<pre><code>sudo vim /etc/grub.conf
</code></pre><p>数一下刚刚新安装的内核在哪个位置，从0开始，然后设置default为那个数字，一般新安装的内核在第一个位置，所以设置<code>default=0</code>。</p>
<p>##6 重启</p>
<pre><code>sudo reboot
</code></pre><p>重启后，看一下当前内核版本号，</p>
<pre><code>uname -r
3.10.28
</code></pre><p>成功啦！！</p>
<p>##7 如果失败，则重新循环</p>
<p>如果失败，重新开始的话，要清理上次编译的现场 </p>
<pre><code>make mrproper #清理上次编译的现场 
</code></pre><p>然后转到第2步，重新开始。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="http://xmodulo.com/2013/07/how-to-upgrade-the-kernel-on-centos.html" target="_blank" rel="external">How to upgrade the kernel on CentOS</a></li>
<li><a href="http://winotes.net/centos-64-upgrade-to-kernel-3x.html" target="_blank" rel="external">CentOS 6.4 升级到 3.x Kernel</a></li>
<li><a href="http://my.oschina.net/qichang/blog/101542" target="_blank" rel="external">CentOS Linux 升级内核步骤和方法</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014-01-22-install-docker-on-centos65/" itemprop="url">
                  在Centos 6.5上安装docker
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-01-22T15:25:00Z" content="2014-01-22">
              2014-01-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014-01-22-install-docker-on-centos65/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014-01-22-install-docker-on-centos65/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-Enable-EPEL-Repo-on-CentOS"><a href="#1-Enable-EPEL-Repo-on-CentOS" class="headerlink" title="1 Enable EPEL Repo on CentOS"></a>1 Enable EPEL Repo on CentOS</h2><p>参考 <a href="http://www.centosblog.com/enable-epel-repo-on-centos-5-and-centos-6/" target="_blank" rel="external">Enable EPEL Repo on CentOS 5 and CentOS 6</a></p>
<pre><code>rpm -Uvh http://download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
</code></pre><h2 id="2-Install-docker"><a href="#2-Install-docker" class="headerlink" title="2 Install docker"></a>2 Install docker</h2><pre><code>yum install docker-io --enablerepo=epel
</code></pre><h2 id="3-启动-docker-daemon-进程"><a href="#3-启动-docker-daemon-进程" class="headerlink" title="3 启动 docker daemon 进程"></a>3 启动 docker daemon 进程</h2><pre><code>sudo docker -d &amp;
</code></pre><p>这时，有警告，说内核版本过低，</p>
<blockquote>
<p>WARNING: You are running linux kernel version 2.6.32-431.el6.x86_64, which might be unstable running docker. Please upgrade your kernel to 3.8.0.</p>
</blockquote>
<p>如果你在公司，且公司内部都是通过代理上网，则可以把代理服务器告诉docker，用如下命令(参考<a href="https://github.com/dotcloud/docker/issues/402" target="_blank" rel="external">这里</a>)：</p>
<pre><code>sudo HTTP_PROXY=http://xxx:port docker -d &amp;
</code></pre><h2 id="4-升级内核"><a href="#4-升级内核" class="headerlink" title="4 升级内核"></a>4 升级内核</h2><p>见我的另一篇博客，<a href="http://www.yanjiuyanjiu.com/blog/20131024" target="_blank" rel="external">CentOS 6.4 升级内核到 3.11.6</a></p>
<h2 id="5-下载-ubuntu-镜像"><a href="#5-下载-ubuntu-镜像" class="headerlink" title="5 下载 ubuntu 镜像"></a>5 下载 ubuntu 镜像</h2><pre><code>sudo docker pull ubuntu
</code></pre><h2 id="6-运行-hello-world"><a href="#6-运行-hello-world" class="headerlink" title="6 运行 hello world"></a>6 运行 hello world</h2><pre><code>sudo docker run ubuntu /bin/echo hello world
hello world
</code></pre><p>安装成功了！！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://tva2.sinaimg.cn/crop.4.536.2038.2038.180/632582bfgw1f31kbqdasbj21kw23uhdt.jpg"
               alt="soulmachine" />
          <p class="site-author-name" itemprop="name">soulmachine</p>
          <p class="site-description motion-element" itemprop="description">一些技术笔记</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">60</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/soulmachine" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/soulmachine" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/soulmachine" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/soulmachine" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.liancheng.info/" title="连城" target="_blank">连城</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://yewen.us/" title="笨狗随手留下" target="_blank">笨狗随手留下</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.rational.so/" title="阎栋" target="_blank">阎栋</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.parallellabs.com/" title="并行实验室" target="_blank">并行实验室</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.javachen.com/" title="JavaChen" target="_blank">JavaChen</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://shenfeng.me/" title="沈峰" target="_blank">沈峰</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.lihaipeng.info/" title="李海鹏" target="_blank">李海鹏</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.chioka.in/" title="Eric" target="_blank">Eric</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.csdn.net/lgnlgn" title="梁兄的技术博客" target="_blank">梁兄的技术博客</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.doesbetter.com/" title="王孝舒的博客" target="_blank">王孝舒的博客</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.foreverlee.net/" title="ForeverLee" target="_blank">ForeverLee</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.cnblogs.com/yuzhangcmu/" title="CMU张宇" target="_blank">CMU张宇</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">soulmachine</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"soulmachine"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  

  

</body>
</html>
